$("#register").on("focus","input",function(){$(this).siblings("span").show()});$("#register").on("blur","input",function(){$(this).siblings("span").hide()});$("#agree").click(function(){$("#btn-register").prop("disabled",!$("#agree").prop("checked")).toggleClass("disabled")});var uname,upwd,phone;$("#btn-register").click(function(){var b=unameCheck();var a=phoneCheck();var c=upwdCheck();var d=upwd2Check();if(b&&a&&c&&d){$.ajax({type:"post",url:"data/register.php",data:{uname:uname,phone:phone,upwd:upwd},success:function(e){console.log(e);if(e[0].code==1){console.log(1);sessionStorage.uid=e[0].uid;sessionStorage.uname=e[0].uname;alert("恭喜您注册成功！即将为您返回到注册前的页面！");history.go(-1)}}})}});function unameCheck(){uname=$.trim($("#u_name").val());var a=$("#u_name").siblings("span");if(!uname){console.log(a);a.show().addClass("err").text("用户名不能为空");return false}else{a.hide();return true}}function phoneCheck(){phone=$.trim($("#u_phone").val());var a=$("#u_phone").siblings("span");var b=/^1[3578]\d{9}$/;if(!phone){a.show().addClass("err").text("手机号不能为空");return false}else{if(!b.test(phone)){a.show().addClass("err").text("请输入正确的手机号格式");return false}else{if(phoneExist()){a.show().addClass("err").text("该手机号已被其他用户绑定");return false}else{a.hide();return true}}}}function phoneExist(){var a;$.ajax({type:"post",url:"data/user_check_phone.php",data:{phone:phone},async:false,success:function(b){if(b.code==1){a=true}else{a=false}}});return a}function upwdCheck(){upwd=$.trim($("#u_pwd").val());var a=$("#u_pwd").siblings("span");if(!upwd){a.show().addClass("err").text("密码不能为空");return false}else{if(upwd.length<6||upwd.length>12){a.show().addClass("err").text("密码长度应为6~12位");return false}else{a.hide();return true}}}function upwd2Check(){var b=$.trim($("#u_pwd_confirm").val());var a=$("#u_pwd_confirm").siblings("span");if(!b){a.show().addClass("err").text("密码不能为空");return false}else{if(b.length<6||b.length>12){a.show().addClass("err").text("密码长度应为6~12位");return false}else{if(b!=upwd){a.show().addClass("err").text("两次密码不一致");return false}else{a.hide();return true}}}};
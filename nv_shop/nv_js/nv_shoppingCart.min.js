var app=angular.module("myApp",["ng"]);app.controller("parentCtrl",["$scope","$http",function(a,c){function b(){c.get("data/cart_select.php?uid="+uid).success(function(d){a.data=d;if(d.data){var f=d.data;a.total=0;for(var e=0;e<f.length;e++){if(f[e].status==1){a.total+=(parseFloat(f[e].price*f[e].count))}}}})}if(isLogin()){b()}else{location.href="login.html"}a.changeCount=function(e,d){c.get("data/count_add.php?did="+e+"&i="+d).success(function(){b();getCartCount(uid)})};a.del_cart=function(e){var d=confirm("确定要删除？");if(d){c.get("data/del_cart.php?did="+e).success(function(f){if(f.code=1){alert("删除成功");getCartCount(uid);b()}})}};a.order_add=function(g){var e=g.uid;var f=g.data;for(var d=0;d<f.length;d++){if(f[d].status==1){c.get("data/order_add.php?pid="+f[d].pid+"&pname="+f[d].pname+"&price="+f[d].price+"&pic_s="+f[d].pic_s+"&uid="+e+"&did="+f[d].did).success(function(h){if(h.code==1){b();var i=confirm("订单添加成功，编号为："+h.orderId+"\n去查看？");if(i){location.href="nv_usercenter.html"}}})}}};a.changeStatus=function(e,d){if(d){c.get("data/cart_changeStute.php?did="+e+"&status=1")}else{c.get("data/cart_changeStute.php?did="+e+"&status=2")}b()}}]);